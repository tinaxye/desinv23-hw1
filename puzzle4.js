function repeat(direction, max) {
  var count = 0;
  while (count < max) {
    direction;
    count = count + 1;
  }
}

function changeAndCollect() {
  right;
  var myColor = getColor();
  down;
  right;
  setColor(myColor);
  right;
}

repeat(down, 4);
changeAndCollect();
up;
changeAndCollect();
